{
  "type": "object",
  "required": [
    "EAIMessage"
  ],
  "additionalProperties": false,
  "properties": {
    "EAIMessage": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "EAIHeader": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "messageFormat": {
              "type": "string",
              "enum": [
                "JSON",
                "XML"
              ],
              "example": "JSON",
              "description": " type"
            },
            "cif": {
              "type": "string",
              "description": "Customer Information File number",
              "example": "1234567"
            },
            "channelId": {
              "type": "string",
              "description": "Channel identifier",
              "enum": [
                "MOB",
                "WEB",
                "ATM",
                "BRANCH"
              ],
              "example": "MOB"
            },
            "functionId": {
              "type": "string",
              "description": "Function identifier",
              "example": "DEMO_FUNC_001"
            },
            "language": {
              "type": "string",
              "enum": [
                "EN",
                "AR"
              ],
              "example": "EN",
              "description": "Language code"
            },
            "reversalOption": {
              "type": "boolean",
              "example": false,
              "description": "Indicates if transaction can be reversed"
            },
            "segment": {
              "type": "string",
              "example": "RETAIL",
              "description": "Customer segment"
            },
            "requesterInfo1": {
              "type": "string",
              "description": "Additional requester information field 1"
            },
            "requesterInfo2": {
              "type": "string",
              "description": "Additional requester information field 2"
            },
            "deviceInfo": {
              "type": "object",
              "additionalProperties": false,
              "description": "Device information for the request",
              "properties": {
                "model": {
                  "type": "string",
                  "example": "iPhone 14",
                  "description": "Device model"
                },
                "osType": {
                  "type": "string",
                  "example": "iOS",
                  "description": "Operating system type"
                },
                "osVersion": {
                  "type": "string",
                  "example": "16.5",
                  "description": "Operating system version"
                },
                "id": {
                  "type": "string",
                  "example": "ABC123XYZ",
                  "description": "Unique device identifier"
                },
                "ipAddress": {
                  "type": "string",
                  "format": "ipv4",
                  "example": "192.168.1.100",
                  "description": "Device IP address"
                },
                "city": {
                  "type": "string",
                  "example": "Riyadh",
                  "description": "City of the device location"
                },
                "country": {
                  "type": "string",
                  "minLength": 2,
                  "maxLength": 2,
                  "example": "SA",
                  "description": "ISO 3166-1 alpha-2 country code"
                }
              }
            },
            "frontendReferenceNumber": {
              "type": "string",
              "example": "FE123456789",
              "description": "Frontend system reference number"
            },
            "backendReferenceNumber": {
              "type": "string",
              "example": "BE987654321",
              "description": "Backend system reference number"
            },
            "transactionDateTime": {
              "type": "string",
              "format": "date-time",
              "example": "2024-12-14T10:30:00Z",
              "description": "Transaction timestamp in ISO 8601 format"
            }
          }
        },
        "Body": {
          "type": "object",
          "required": [
            "accountNumber",
            "customerId"
          ],
          "additionalProperties": false,
          "description": "Request body with business-specific data",
          "properties": {
            "accountNumber": {
              "type": "string",
              "description": "The account number",
              "minLength": 10,
              "maxLength": 20,
              "pattern": "^[0-9]+$",
              "example": "1234567890"
            },
            "customerId": {
              "type": "string",
              "description": "Unique customer identifier",
              "example": "CUST-001"
            },
            "transactionType": {
              "type": "string",
              "description": "Type of transaction",
              "enum": [
                "DEPOSIT",
                "WITHDRAWAL",
                "TRANSFER",
                "INQUIRY"
              ],
              "example": "INQUIRY"
            },
            "amount": {
              "type": "number",
              "format": "double",
              "description": "Transaction amount with decimal precision",
              "minimum": 0,
              "exclusiveMinimum": false,
              "example": 1000.50
            },
            "currency": {
              "type": "string",
              "description": "ISO 4217 currency code",
              "minLength": 3,
              "maxLength": 3,
              "pattern": "^[A-Z]{3}$",
              "default": "SAR",
              "example": "SAR"
            },
            "metadata": {
              "type": "object",
              "description": "Additional transaction metadata",
              "additionalProperties": false,
              "properties": {
                "source": {
                  "type": "string",
                  "example": "mobile_app",
                  "description": "Source of the transaction"
                },
                "notes": {
                  "type": "string",
                  "maxLength": 500,
                  "description": "Additional notes"
                }
              }
            }
          }
        }
      }
    }
  }
}